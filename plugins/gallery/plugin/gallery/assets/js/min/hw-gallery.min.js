function hw_galleryGetColWidth(t,e){var i,o=jQuery(window).width(),n=t.data("hw-gallery-columns");switch(n){case 1:i=t.width();break;case 2:i=480>=o?t.width():t.width()/2;break;case 3:i=480>=o?t.width():768>=o?t.width()/2:t.width()/3;case 4:case 5:case 6:i=480>=o?t.width():768>=o?t.width()/2:1024>=o?t.width()/3:t.width()/n}return parseInt(i-e*(n-1)/n)}function hw_gallerySetWidths(t,e){var i=hw_galleryGetColWidth(t,e);t.children().css({width:i})}function hw_galleryIsMobile(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t}function hw_galleryThrottle(t,e){return function(){var i=this,o=[].slice(arguments);clearTimeout(t._throttleTimeout),t._throttleTimeout=setTimeout(function(){t.apply(i,o)},e)}}(function(t,e,i,o){"use strict";var n=i("html"),s=i(t),r=i(e),a=i.hw_gallerybox=function(){a.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),h=null,c=e.createTouch!==o,d=function(t){return t&&t.hasOwnProperty&&t instanceof i},u=function(t){return t&&"string"===i.type(t)},p=function(t){return u(t)&&t.indexOf("%")>0},f=function(t){return t&&!(t.style.overflow&&"hidden"===t.style.overflow)&&(t.clientWidth&&t.scrollWidth>t.clientWidth||t.clientHeight&&t.scrollHeight>t.clientHeight)},g=function(t,e){var i=parseInt(t,10)||0;return e&&p(t)&&(i=a.getViewport()[e]/100*i),Math.ceil(i)},m=function(t,e){return g(t,e)+"px"};i.extend(a,{version:"2.1.5",defaults:{padding:15,margin:40,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!c,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-envirabox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="hw-gallerybox-wrap" tabIndex="-1"><div class="hw-gallerybox-skin"><div class="hw-gallerybox-outer"><div class="hw-gallerybox-inner"></div></div></div></div>',image:'<img class="hw-gallerybox-image" src="{href}" alt="" />',iframe:'<iframe id="hw-gallerybox-frame{rnd}" name="hw-gallerybox-frame{rnd}" class="hw-gallerybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="hw-gallerybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="hw-gallerybox-item hw-gallerybox-close" href="javascript:;"></a>',next:'<a title="Next" class="hw-gallerybox-nav hw-gallerybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="hw-gallerybox-nav hw-gallerybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeChange:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(t,e){return t&&(i.isPlainObject(e)||(e={}),!1!==a.close(!0))?(i.isArray(t)||(t=d(t)?i(t).get():[t]),i.each(t,function(n,s){var r,l,h,c,p,f,g,m={};"object"===i.type(s)&&(s.nodeType&&(s=i(s)),d(s)?(m={href:s.data("hw-gallerybox-href")||s.attr("href"),title:i("<div/>").text(s.data("hw-gallerybox-title")||s.attr("title")).html(),isDom:!0,element:s},i.metadata&&i.extend(!0,m,s.metadata())):m=s),r=e.href||m.href||(u(s)?s:null),l=e.title!==o?e.title:m.title||"",h=e.content||m.content,c=h?"html":e.type||m.type,!c&&m.isDom&&(c=s.data("hw-gallerybox-type"),c||(p=s.prop("class").match(/hw\-gallerybox\.(\w+)/),c=p?p[1]:null)),u(r)&&(c||(a.isImage(r)?c="image":a.isSWF(r)?c="swf":"#"===r.charAt(0)?c="inline":u(s)&&(c="html",h=s)),"ajax"===c&&(f=r.split(/\s+/,2),r=f.shift(),g=f.shift())),h||("inline"===c?r?h=i(u(r)?r.replace(/.*(?=#[^\s]+$)/,""):r):m.isDom&&(h=s):"html"===c?h=r:c||r||!m.isDom||(c="inline",h=s)),i.extend(m,{href:r,type:c,content:h,title:l,selector:g}),t[n]=m}),a.opts=i.extend(!0,{},a.defaults,e),e.keys!==o&&(a.opts.keys=e.keys?i.extend({},a.defaults.keys,e.keys):!1),a.group=t,a._start(a.opts.index)):o},cancel:function(){var t=a.coming;t&&!1===a.trigger("onCancel")||(a.hideLoading(),t&&(a.ajaxLoad&&a.ajaxLoad.abort(),a.ajaxLoad=null,a.imgPreload&&(a.imgPreload.onload=a.imgPreload.onerror=null),t.wrap&&t.wrap.stop(!0,!0).trigger("onReset").remove(),a.coming=null,a.current||a._afterZoomOut(t)))},close:function(t){a.cancel(),!1!==a.trigger("beforeClose")&&(a.unbindEvents(),a.isActive&&(a.isOpen&&t!==!0?(a.isOpen=a.isOpened=!1,a.isClosing=!0,i(".hw-gallerybox-item, .hw-gallerybox-nav").remove(),a.wrap.stop(!0,!0).removeClass("hw-gallerybox-opened"),a.transitions[a.current.closeMethod]()):(i(".hw-gallerybox-wrap").stop(!0).trigger("onReset").remove(),a._afterZoomOut())))},play:function(t){var e=function(){clearTimeout(a.player.timer)},i=function(){e(),a.current&&a.player.isActive&&(a.player.timer=setTimeout(a.next,a.current.playSpeed))},o=function(){e(),r.unbind(".player"),a.player.isActive=!1,a.trigger("onPlayEnd")},n=function(){a.current&&(a.current.loop||a.current.index<a.group.length-1)&&(a.player.isActive=!0,r.bind({"onCancel.player beforeClose.player":o,"onUpdate.player":i,"beforeLoad.player":e}),i(),a.trigger("onPlayStart"))};t===!0||!a.player.isActive&&t!==!1?n():o()},next:function(t){var e=a.current;e&&(u(t)||(t=e.direction.next),a.jumpto(e.index+1,t,"next"))},prev:function(t){var e=a.current;e&&(u(t)||(t=e.direction.prev),a.jumpto(e.index-1,t,"prev"))},jumpto:function(t,e,i){var n=a.current;n&&(t=g(t),a.direction=e||n.direction[t>=n.index?"next":"prev"],a.router=i||"jumpto",n.loop&&(0>t&&(t=n.group.length+t%n.group.length),t%=n.group.length),n.group[t]!==o&&(a.cancel(),a._start(t)))},reposition:function(t,e){var o,n=a.current,s=n?n.wrap:null;s&&(o=a._getPosition(e),t&&"scroll"===t.type?(delete o.position,s.stop(!0,!0).animate(o,200)):(s.css(o),n.pos=i.extend({},n.dim,o)))},update:function(t){var e=t&&t.originalEvent&&t.originalEvent.type,i=!e||"orientationchange"===e;i&&(clearTimeout(h),h=null),a.isOpen&&!h&&(h=setTimeout(function(){var o=a.current;o&&!a.isClosing&&(a.wrap.removeClass("hw-gallerybox-tmp"),(i||"load"===e||"resize"===e&&o.autoResize)&&a._setDimension(),"scroll"===e&&o.canShrink||a.reposition(t),a.trigger("onUpdate"),h=null)},i&&!c?0:300))},toggle:function(t){a.isOpen&&(a.current.fitToView="boolean"===i.type(t)?t:!a.current.fitToView,c&&(a.wrap.removeAttr("style").addClass("hw-gallerybox-tmp"),a.trigger("onUpdate")),a.update())},hideLoading:function(){r.unbind(".loading"),i("#hw-gallerybox-loading").remove()},showLoading:function(){var t,e;a.hideLoading(),t=i('<div id="hw-gallerybox-loading"><div></div></div>').click(a.cancel).appendTo("body"),r.bind("keydown.loading",function(t){27===(t.which||t.keyCode)&&(t.preventDefault(),a.cancel())}),a.defaults.fixed||(e=a.getViewport(),t.css({position:"absolute",top:.5*e.h+e.y,left:.5*e.w+e.x})),a.trigger("onLoading")},getViewport:function(){var e=a.current&&a.current.locked||!1,i={x:s.scrollLeft(),y:s.scrollTop()};return e&&e.length?(i.w=e[0].clientWidth,i.h=e[0].clientHeight):(i.w=c&&t.innerWidth?t.innerWidth:s.width(),i.h=c&&t.innerHeight?t.innerHeight:s.height()),i},unbindEvents:function(){a.wrap&&d(a.wrap)&&a.wrap.unbind(".fb"),r.unbind(".fb"),s.unbind(".fb")},bindEvents:function(){var t,e=a.current;e&&(s.bind("orientationchange.fb"+(c?"":" resize.fb")+(e.autoCenter&&!e.locked?" scroll.fb":""),a.update),t=e.keys,t&&r.bind("keydown.fb",function(n){var s=n.which||n.keyCode,r=n.target||n.srcElement;return 27===s&&a.coming?!1:(n.ctrlKey||n.altKey||n.shiftKey||n.metaKey||r&&(r.type||i(r).is("[contenteditable]"))||i.each(t,function(t,r){return e.group.length>1&&r[s]!==o?(a[t](r[s]),n.preventDefault(),!1):i.inArray(s,r)>-1?(a[t](),n.preventDefault(),!1):o}),o)}),i.fn.mousewheel&&e.mouseWheel&&a.wrap.bind("mousewheel.fb",function(t,o,n,s){for(var r=t.target||null,l=i(r),h=!1;l.length&&!(h||l.is(".hw-gallerybox-skin")||l.is(".hw-gallerybox-wrap"));)h=f(l[0]),l=i(l).parent();0===o||h||a.group.length>1&&!e.canShrink&&(s>0||n>0?a.prev(s>0?"down":"left"):(0>s||0>n)&&a.next(0>s?"up":"right"),t.preventDefault())}))},trigger:function(t,e){var o,n=e||a.coming||a.current;if(n){if(i.isFunction(n[t])&&(o=n[t].apply(n,Array.prototype.slice.call(arguments,1))),o===!1)return!1;n.helpers&&i.each(n.helpers,function(e,o){o&&a.helpers[e]&&i.isFunction(a.helpers[e][t])&&a.helpers[e][t](i.extend(!0,{},a.helpers[e].defaults,o),n)})}r.trigger(t)},isImage:function(t){return u(t)&&t.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(t){return u(t)&&t.match(/\.(swf)((\?|#).*)?$/i)},_start:function(t){var e,n,s,r,l,h={};if(t=g(t),e=a.group[t]||null,!e)return!1;if(h=i.extend(!0,{},a.opts,e),r=h.margin,l=h.padding,"number"===i.type(r)&&(h.margin=[r,r,r,r]),"number"===i.type(l)&&(h.padding=[l,l,l,l]),h.modal&&i.extend(!0,h,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),h.autoSize&&(h.autoWidth=h.autoHeight=!0),"auto"===h.width&&(h.autoWidth=!0),"auto"===h.height&&(h.autoHeight=!0),h.group=a.group,h.index=t,a.coming=h,!1===a.trigger("beforeLoad"))return a.coming=null,o;if(s=h.type,n=h.href,!s)return a.coming=null,a.current&&a.router&&"jumpto"!==a.router?(a.current.index=t,a[a.router](a.direction)):!1;if(a.isActive=!0,("image"===s||"swf"===s)&&(h.autoHeight=h.autoWidth=!1,h.scrolling="visible"),"image"===s&&(h.aspectRatio=!0),"iframe"===s&&c&&(h.scrolling="scroll"),h.wrap=i(h.tpl.wrap).addClass("hw-gallerybox-"+(c?"mobile":"desktop")+" hw-gallerybox-type-"+s+" hw-gallerybox-tmp "+h.wrapCSS).appendTo(h.parent||"body"),i.extend(h,{skin:i(".hw-gallerybox-skin",h.wrap),outer:i(".hw-gallerybox-outer",h.wrap),inner:i(".hw-gallerybox-inner",h.wrap)}),i.each(["Top","Right","Bottom","Left"],function(t,e){h.skin.css("padding"+e,m(h.padding[t]))}),a.trigger("onReady"),"inline"===s||"html"===s){if(!h.content||!h.content.length)return a._error("content")}else if(!n)return a._error("href");"image"===s?a._loadImage():"ajax"===s?a._loadAjax():"iframe"===s?a._loadIframe():a._afterLoad()},_error:function(t){i.extend(a.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:t,content:a.coming.tpl.error}),a._afterLoad()},_loadImage:function(){var t=a.imgPreload=new Image;t.onload=function(){this.onload=this.onerror=null,a.coming.width=this.width/a.opts.pixelRatio,a.coming.height=this.height/a.opts.pixelRatio,a._afterLoad()},t.onerror=function(){this.onload=this.onerror=null,a._error("image")},t.src=a.coming.href,t.complete!==!0&&a.showLoading()},_loadAjax:function(){var t=a.coming;a.showLoading(),a.ajaxLoad=i.ajax(i.extend({},t.ajax,{url:t.href,error:function(t,e){a.coming&&"abort"!==e?a._error("ajax",t):a.hideLoading()},success:function(e,i){"success"===i&&(t.content=e,a._afterLoad())}}))},_loadIframe:function(){var t=a.coming,e=i(t.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",c?"auto":t.iframe.scrolling).attr("src",t.href);i(t.wrap).bind("onReset",function(){try{i(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(t){}}),t.iframe.preload&&(a.showLoading(),e.one("load",function(){i(this).data("ready",1),c||i(this).bind("load.fb",a.update),i(this).parents(".hw-gallerybox-wrap").width("100%").removeClass("hw-gallerybox-tmp").show(),a._afterLoad()})),t.content=e.appendTo(t.inner),t.iframe.preload||a._afterLoad()},_preloadImages:function(){var t,e,i=a.group,o=a.current,n=i.length,s=o.preload?Math.min(o.preload,n-1):0;for(e=1;s>=e;e+=1)t=i[(o.index+e)%n],"image"===t.type&&t.href&&((new Image).src=t.href)},_afterLoad:function(){var t,e,n,s,r,l,h=a.coming,c=a.current,u="hw-gallerybox-placeholder";if(a.hideLoading(),h&&a.isActive!==!1){if(!1===a.trigger("afterLoad",h,c))return h.wrap.stop(!0).trigger("onReset").remove(),a.coming=null,o;switch(c&&(a.trigger("beforeChange",c),c.wrap.stop(!0).removeClass("hw-gallerybox-opened").find(".hw-gallerybox-item, .hw-gallerybox-nav").remove()),a.unbindEvents(),t=h,e=h.content,n=h.type,s=h.scrolling,i.extend(a,{wrap:t.wrap,skin:t.skin,outer:t.outer,inner:t.inner,current:t,previous:c}),r=t.href,n){case"inline":case"ajax":case"html":t.selector?e=i("<div>").html(e).find(t.selector):d(e)&&(e.data(u)||e.data(u,i('<div class="'+u+'"></div>').insertAfter(e).hide()),e=e.show().detach(),t.wrap.bind("onReset",function(){i(this).find(e).length&&e.hide().replaceAll(e.data(u)).data(u,!1)}));break;case"image":e=t.tpl.image.replace(/\{href\}/g,r);break;case"swf":e='<object id="hw-gallerybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+r+'"></param>',l="",i.each(t.swf,function(t,i){e+='<param name="'+t+'" value="'+i+'"></param>',l+=" "+t+'="'+i+'"'}),e+='<embed src="'+r+'" type="application/x-shockwave-flash" width="100%" height="100%"'+l+"></embed></object>"}d(e)&&e.parent().is(t.inner)||t.inner.append(e),a.trigger("beforeShow"),t.inner.css("overflow","yes"===s?"scroll":"no"===s?"hidden":s),a._setDimension(),a.reposition(),a.isOpen=!1,a.coming=null,a.bindEvents(),a.isOpened?c.prevMethod&&a.transitions[c.prevMethod]():i(".hw-gallerybox-wrap").not(t.wrap).stop(!0).trigger("onReset").remove(),a.transitions[a.isOpened?t.nextMethod:t.openMethod](),a._preloadImages()}},_setDimension:function(){var t,e,o,n,s,r,l,h,c,d,u,f,y,w,v,x=a.getViewport(),b=0,_=!1,C=!1,k=a.wrap,A=a.skin,S=a.inner,M=a.current,z=M.width,H=M.height,R=M.minWidth,T=M.minHeight,W=M.maxWidth,P=M.maxHeight,L=M.scrolling,O=M.scrollOutside?M.scrollbarWidth:0,I=M.margin,D=g(I[1]+I[3]),E=g(I[0]+I[2]);if(k.add(A).add(S).width("auto").height("auto").removeClass("hw-gallerybox-tmp"),t=g(A.outerWidth(!0)-A.width()),e=g(A.outerHeight(!0)-A.height()),o=D+t,n=E+e,s=p(z)?(x.w-o)*g(z)/100:z,r=p(H)?(x.h-n)*g(H)/100:H,"iframe"===M.type){if(w=M.content,M.autoHeight&&1===w.data("ready"))try{w[0].contentWindow.document.location&&(S.width(s).height(9999),v=w.contents().find("body"),O&&v.css("overflow-x","hidden"),r=v.outerHeight(!0))}catch(j){}}else(M.autoWidth||M.autoHeight)&&(S.addClass("hw-gallerybox-tmp"),M.autoWidth||S.width(s),M.autoHeight||S.height(r),M.autoWidth&&(s=S.width()),M.autoHeight&&(r=S.height()),S.removeClass("hw-gallerybox-tmp"));if(z=g(s),H=g(r),c=s/r,R=g(p(R)?g(R,"w")-o:R),W=g(p(W)?g(W,"w")-o:W),T=g(p(T)?g(T,"h")-n:T),P=g(p(P)?g(P,"h")-n:P),l=W,h=P,M.fitToView&&(W=Math.min(x.w-o,W),P=Math.min(x.h-n,P)),f=x.w-D,y=x.h-E,M.aspectRatio?(z>W&&(z=W,H=g(z/c)),H>P&&(H=P,z=g(H*c)),R>z&&(z=R,H=g(z/c)),T>H&&(H=T,z=g(H*c))):(z=Math.max(R,Math.min(z,W)),M.autoHeight&&"iframe"!==M.type&&(S.width(z),H=S.height()),H=Math.max(T,Math.min(H,P))),M.fitToView)if(S.width(z).height(H),k.width(z+t),d=k.width(),u=k.height(),M.aspectRatio)for(;(d>f||u>y)&&z>R&&H>T&&!(b++>19);)H=Math.max(T,Math.min(P,H-10)),z=g(H*c),R>z&&(z=R,H=g(z/c)),z>W&&(z=W,H=g(z/c)),S.width(z).height(H),k.width(z+t),d=k.width(),u=k.height();else z=Math.max(R,Math.min(z,z-(d-f))),H=Math.max(T,Math.min(H,H-(u-y)));O&&"auto"===L&&r>H&&f>z+t+O&&(z+=O),S.width(z).height(H),k.width(z+t),d=k.width(),u=k.height(),_=(d>f||u>y)&&z>R&&H>T,C=M.aspectRatio?l>z&&h>H&&s>z&&r>H:(l>z||h>H)&&(s>z||r>H),i.extend(M,{dim:{width:m(d),height:m(u)},origWidth:s,origHeight:r,canShrink:_,canExpand:C,wPadding:t,hPadding:e,wrapSpace:u-A.outerHeight(!0),skinSpace:A.height()-H}),!w&&M.autoHeight&&H>T&&P>H&&!C&&S.height("auto")},_getPosition:function(t){var e=a.current,o=a.getViewport(),n=e.margin,s=a.wrap.width()+n[1]+n[3],r=a.wrap.height()+n[0]+n[2],l={position:"absolute",top:n[0],left:n[3]};return e.helpers.title.type&&"float"==e.helpers.title.type&&(r+=i(".hw-gallerybox-skin .hw-gallerybox-title").height()),e.autoCenter&&e.fixed&&!t&&o.h>=r&&o.w>=s?l.position="fixed":e.locked||(l.top+=o.y,l.left+=o.x),l.top=m(Math.max(l.top,l.top+(o.h-r)*e.topRatio)),l.left=m(Math.max(l.left,l.left+(o.w-s)*e.leftRatio)),l},_afterZoomIn:function(){var t=a.current;t&&(a.isOpen=a.isOpened=!0,a.wrap.css("overflow","visible").addClass("hw-gallerybox-opened").hide().show(0),a.update(),(t.closeClick||t.nextClick&&a.group.length>1)&&a.inner.css("cursor","pointer").bind("click.fb",function(e){i(e.target).is("a")||i(e.target).parent().is("a")||(e.preventDefault(),a[t.closeClick?"close":"next"]())}),t.closeBtn&&i(t.tpl.closeBtn).appendTo(a.skin).bind("click.fb",function(t){t.preventDefault(),a.close()}),t.arrows&&a.group.length>1&&((t.loop||t.index>0)&&i(t.tpl.prev).appendTo(a.outer).bind("click.fb",a.prev),(t.loop||t.index<a.group.length-1)&&i(t.tpl.next).appendTo(a.outer).bind("click.fb",a.next)),a.trigger("afterShow"),t.loop||t.index!==t.group.length-1?a.opts.autoPlay&&!a.player.isActive&&(a.opts.autoPlay=!1,a.play(!0)):a.play(!1))},_afterZoomOut:function(t){t=t||a.current,i(".hw-gallerybox-wrap").trigger("onReset").remove(),i.extend(a,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),a.trigger("afterClose",t)}}),a.transitions={getOrigPosition:function(){var t=a.current,e=t.element,i=t.orig,o={},n=50,s=50,r=t.hPadding,l=t.wPadding,h=a.getViewport();return!i&&t.isDom&&e.is(":visible")&&(i=e.find("img:first"),i.length||(i=e)),d(i)?(o=i.offset(),i.is("img")&&(n=i.outerWidth(),s=i.outerHeight())):(o.top=h.y+(h.h-s)*t.topRatio,o.left=h.x+(h.w-n)*t.leftRatio),("fixed"===a.wrap.css("position")||t.locked)&&(o.top-=h.y,o.left-=h.x),o={top:m(o.top-r*t.topRatio),left:m(o.left-l*t.leftRatio),width:m(n+l),height:m(s+r)}},step:function(t,e){var i,o,n,s=e.prop,r=a.current,l=r.wrapSpace,h=r.skinSpace;("width"===s||"height"===s)&&(i=e.end===e.start?1:(t-e.start)/(e.end-e.start),a.isClosing&&(i=1-i),o="width"===s?r.wPadding:r.hPadding,n=t-o,a.skin[s](g("width"===s?n:n-l*i)),a.inner[s](g("width"===s?n:n-l*i-h*i)))},zoomIn:function(){var t=a.current,e=t.pos,o=t.openEffect,n="elastic"===o,s=i.extend({opacity:1},e);delete s.position,n?(e=this.getOrigPosition(),t.openOpacity&&(e.opacity=.1)):"fade"===o&&(e.opacity=.1),a.wrap.css(e).animate(s,{duration:"none"===o?0:t.openSpeed,easing:t.openEasing,step:n?this.step:null,complete:a._afterZoomIn})},zoomOut:function(){var t=a.current,e=t.closeEffect,i="elastic"===e,o={opacity:.1};i&&(o=this.getOrigPosition(),t.closeOpacity&&(o.opacity=.1)),a.wrap.animate(o,{duration:"none"===e?0:t.closeSpeed,easing:t.closeEasing,step:i?this.step:null,complete:a._afterZoomOut})},changeIn:function(){var t,e=a.current,i=e.nextEffect,o=e.pos,n={opacity:1},s=a.direction,r=200;o.opacity=.1,"elastic"===i&&(t="down"===s||"up"===s?"top":"left","down"===s||"right"===s?(o[t]=m(g(o[t])-r),n[t]="+="+r+"px"):(o[t]=m(g(o[t])+r),n[t]="-="+r+"px")),"none"===i?a._afterZoomIn():a.wrap.css(o).animate(n,{duration:e.nextSpeed,easing:e.nextEasing,complete:a._afterZoomIn})},changeOut:function(){var t=a.previous,e=t.prevEffect,o={opacity:.1},n=a.direction,s=200;"elastic"===e&&(o["down"===n||"up"===n?"top":"left"]=("up"===n||"left"===n?"-":"+")+"="+s+"px"),t.wrap.animate(o,{duration:"none"===e?0:t.prevSpeed,easing:t.prevEasing,complete:function(){i(this).trigger("onReset").remove()}})}},a.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!c,fixed:!0},overlay:null,fixed:!1,el:i("html"),create:function(t){var e;t=i.extend({},this.defaults,t),this.overlay&&this.close(),e=a.coming?a.coming.parent:t.parent,this.overlay=i('<div class="hw-gallerybox-overlay"></div>').appendTo(e&&e.lenth?e:"body"),this.fixed=!1,t.fixed&&a.defaults.fixed&&(this.overlay.addClass("hw-gallerybox-overlay-fixed"),this.fixed=!0)},open:function(t){var e=this;t=i.extend({},this.defaults,t),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(t),this.fixed||(s.bind("resize.overlay",i.proxy(this.update,this)),this.update()),t.closeClick&&this.overlay.bind("click.overlay",function(t){return i(t.target).hasClass("hw-gallerybox-overlay")?(a.isActive?a.close():e.close(),!1):o}),this.overlay.css(t.css).show()},close:function(){s.unbind("resize.overlay"),this.el.hasClass("hw-gallerybox-lock")&&(i(".hw-gallerybox-margin").removeClass("hw-gallerybox-margin"),this.el.removeClass("hw-gallerybox-lock"),s.scrollTop(this.scrollV).scrollLeft(this.scrollH)),i(".hw-gallerybox-overlay").remove().hide(),i.extend(this,{overlay:null,fixed:!1})},update:function(){var t,i="100%";this.overlay.width(i).height("100%"),l?(t=Math.max(e.documentElement.offsetWidth,e.body.offsetWidth),r.width()>t&&(i=r.width())):r.width()>s.width()&&(i=r.width()),this.overlay.width(i).height(r.height())},onReady:function(t,e){var o=this.overlay;i(".hw-gallerybox-overlay").stop(!0,!0),o||this.create(t),t.locked&&this.fixed&&e.fixed&&(e.locked=this.overlay.append(e.wrap),e.fixed=!1),t.showEarly===!0&&this.beforeShow.apply(this,arguments)},beforeShow:function(t,e){e.locked&&!this.el.hasClass("hw-gallerybox-lock")&&(this.fixPosition!==!1&&i("*").filter(function(){return"fixed"===i(this).css("position")&&!i(this).hasClass("hw-gallerybox-overlay")&&!i(this).hasClass("hw-gallerybox-wrap")}).addClass("hw-gallerybox-margin"),this.el.addClass("hw-gallerybox-margin"),this.scrollV=s.scrollTop(),this.scrollH=s.scrollLeft(),this.el.addClass("hw-gallerybox-lock"),s.scrollTop(this.scrollV).scrollLeft(this.scrollH)),this.open(t)},onUpdate:function(){this.fixed||this.update()},afterClose:function(t){this.overlay&&!a.coming&&this.overlay.fadeOut(t.speedOut,i.proxy(this.close,this))}},a.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(t){var e,o,n=a.current,s=n.title,r=t.type;if(i.isFunction(s)&&(s=s.call(n.element,n)),u(s)&&""!==i.trim(s)){switch(e=i('<div class="hw-gallerybox-title hw-gallerybox-title-'+r+'-wrap">'+s+"</div>"),r){case"inside":o=a.skin;break;case"outside":o=a.wrap;break;case"over":o=a.inner;break;default:o=a.skin,e.appendTo("body"),l&&e.width(e.width()),e.wrapInner('<span class="child"></span>'),a.current.margin[2]+=Math.abs(g(e.css("margin-bottom")))}e["top"===t.position?"prependTo":"appendTo"](o)}}},i.fn.hw_gallerybox=function(t){var e,o=i(this),n=this.selector||"",s=function(s){var r,l,h=i(this).blur(),c=e;s.ctrlKey||s.altKey||s.shiftKey||s.metaKey||h.is(".hw-gallerybox-wrap")||(r=t.groupAttr||"data-hw-gallerybox-group",l=h.attr(r),l||(r="rel",l=h.get(0)[r]),l&&""!==l&&"nofollow"!==l&&(h=n.length?i(n):o,h=h.filter("["+r+'="'+l+'"]'),c=h.index(this)),t.index=c,a.open(h,t)!==!1&&s.preventDefault())};return t=t||{},e=t.index||0,n&&t.live!==!1?r.undelegate(n,"click.fb-start").delegate(n+":not('.hw-gallerybox-item, .hw-gallerybox-nav')","click.fb-start",s):o.unbind("click.fb-start").bind("click.fb-start",s),this.filter("[data-hw-gallerybox-start=1]").trigger("click"),this},r.ready(function(){var e,s;i.scrollbarWidth===o&&(i.scrollbarWidth=function(){var t=i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),e=t.children(),o=e.innerWidth()-e.height(99).innerWidth();return t.remove(),o}),i.support.fixedPosition===o&&(i.support.fixedPosition=function(){var t=i('<div style="position:fixed;top:20px;"></div>').appendTo("body"),e=20===t[0].offsetTop||15===t[0].offsetTop;return t.remove(),e}()),i.extend(a.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")}),e=i(t).width(),n.addClass("hw-gallerybox-lock-test"),s=i(t).width(),n.removeClass("hw-gallerybox-lock-test"),i("<style type='text/css'>.hw-gallerybox-margin{margin-right:"+(s-e)+"px;}</style>").appendTo("head")})})(window,document,jQuery),function(t,e){var i,o=t.document,n=o.documentElement,s=t.Modernizr,r=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},a="Moz Webkit O Ms".split(" "),l=function(t){var e,i=n.style;if("string"==typeof i[t])return t;t=r(t);for(var o=0,s=a.length;s>o;o++)if(e=a[o]+t,"string"==typeof i[e])return e},h=l("transform"),c=l("transitionProperty"),d={csstransforms:function(){return!!h},csstransforms3d:function(){var t=!!l("perspective");if(t&&"webkitPerspective"in n.style){var i=e("<style>@media (transform-3d),(-webkit-transform-3d){#modernizr{height:3px}}</style>").appendTo("head"),o=e('<div id="modernizr" />').appendTo("html");t=3===o.height(),o.remove(),i.remove()}return t},csstransitions:function(){return!!c}};if(s)for(i in d)s.hasOwnProperty(i)||s.addTest(i,d[i]);else{s=t.Modernizr={_version:"1.6ish: miniModernizr for Isotope"};var u,p=" ";for(i in d)u=d[i](),s[i]=u,p+=" "+(u?"":"no-")+i;e("html").addClass(p)}if(s.csstransforms){var f=s.csstransforms3d?{translate:function(t){return"translate3d("+t[0]+"px, "+t[1]+"px, 0) "},scale:function(t){return"scale3d("+t+", "+t+", 1) "}}:{translate:function(t){return"translate("+t[0]+"px, "+t[1]+"px) "},scale:function(t){return"scale("+t+") "}},g=function(t,i,o){var n,s,r=e.data(t,"isoTransform")||{},a={},l={};a[i]=o,e.extend(r,a);for(n in r)s=r[n],l[n]=f[n](s);var c=l.translate||"",d=l.scale||"",u=c+d;e.data(t,"isoTransform",r),t.style[h]=u};e.cssNumber.scale=!0,e.cssHooks.scale={set:function(t,e){g(t,"scale",e)},get:function(t){var i=e.data(t,"isoTransform");return i&&i.scale?i.scale:1}},e.fx.step.scale=function(t){e.cssHooks.scale.set(t.elem,t.now+t.unit)},e.cssNumber.translate=!0,e.cssHooks.translate={set:function(t,e){g(t,"translate",e)},get:function(t){var i=e.data(t,"isoTransform");return i&&i.translate?i.translate:[0,0]}}}var m,y;s.csstransitions&&(m={WebkitTransitionProperty:"webkitTransitionEnd",MozTransitionProperty:"transitionend",OTransitionProperty:"oTransitionEnd otransitionend",transitionProperty:"transitionend"}[c],y=l("transitionDuration"));var w,v=e.event,x=e.event.handle?"handle":"dispatch";v.special.smartresize={setup:function(){e(this).bind("resize",v.special.smartresize.handler)},teardown:function(){e(this).unbind("resize",v.special.smartresize.handler)},handler:function(t,e){var i=this,o=arguments;t.type="smartresize",w&&clearTimeout(w),w=setTimeout(function(){v[x].apply(i,o)},"execAsap"===e?0:100)}},e.fn.smartresize=function(t){return t?this.bind("smartresize",t):this.trigger("smartresize",["execAsap"])},e.Isotope=function(t,i,o){this.element=e(i),this._create(t),this._init(o)};var b=["width","height"],_=e(t);e.Isotope.settings={resizable:!0,layoutMode:"masonry",containerClass:"isotope",itemClass:"isotope-item",hiddenClass:"isotope-hidden",hiddenStyle:{opacity:0,scale:.001},visibleStyle:{opacity:1,scale:1},containerStyle:{position:"relative",overflow:"hidden"},animationEngine:"best-available",animationOptions:{queue:!1,duration:800},sortBy:"original-order",sortAscending:!0,resizesContainer:!0,transformsEnabled:!0,itemPositionDataEnabled:!1},e.Isotope.prototype={_create:function(t){this.options=e.extend({},e.Isotope.settings,t),this.styleQueue=[],this.elemCount=0;var i=this.element[0].style;this.originalStyle={};var o=b.slice(0);for(var n in this.options.containerStyle)o.push(n);for(var s=0,r=o.length;r>s;s++)n=o[s],this.originalStyle[n]=i[n]||"";this.element.css(this.options.containerStyle),this._updateAnimationEngine(),this._updateUsingTransforms();var a={"original-order":function(t,e){return e.elemCount++,e.elemCount},random:function(){return Math.random()}};this.options.getSortData=e.extend(this.options.getSortData,a),this.reloadItems(),this.offset={left:parseInt(this.element.css("padding-left")||0,10),top:parseInt(this.element.css("padding-top")||0,10)};var l=this;setTimeout(function(){l.element.addClass(l.options.containerClass)},0),this.options.resizable&&_.bind("smartresize.isotope",function(){l.resize()}),this.element.delegate("."+this.options.hiddenClass,"click",function(){return!1})},_getAtoms:function(t){var e=this.options.itemSelector,i=e?t.filter(e).add(t.find(e)):t,o={position:"absolute"};return i=i.filter(function(t,e){return 1===e.nodeType}),this.usingTransforms&&(o.left=0,o.top=0),i.css(o).addClass(this.options.itemClass),this.updateSortData(i,!0),i},_init:function(t){this.$filteredAtoms=this._filter(this.$allAtoms),this._sort(),this.reLayout(t)},option:function(t){if(e.isPlainObject(t)){this.options=e.extend(!0,this.options,t);var i;for(var o in t)i="_update"+r(o),this[i]&&this[i]()}},_updateAnimationEngine:function(){var t,e=this.options.animationEngine.toLowerCase().replace(/[ _\-]/g,"");switch(e){case"css":case"none":t=!1;break;case"jquery":t=!0;break;default:t=!s.csstransitions}this.isUsingJQueryAnimation=t,this._updateUsingTransforms()},_updateTransformsEnabled:function(){this._updateUsingTransforms()},_updateUsingTransforms:function(){var t=this.usingTransforms=this.options.transformsEnabled&&s.csstransforms&&s.csstransitions&&!this.isUsingJQueryAnimation;t||(delete this.options.hiddenStyle.scale,delete this.options.visibleStyle.scale),this.getPositionStyles=t?this._translate:this._positionAbs},_filter:function(t){var e=""===this.options.filter?"*":this.options.filter;if(!e)return t;var i=this.options.hiddenClass,o="."+i,n=t.filter(o),s=n;if("*"!==e){s=n.filter(e);var r=t.not(o).not(e).addClass(i);this.styleQueue.push({$el:r,style:this.options.hiddenStyle})}return this.styleQueue.push({$el:s,style:this.options.visibleStyle}),s.removeClass(i),t.filter(e)},updateSortData:function(t,i){var o,n,s=this,r=this.options.getSortData;t.each(function(){o=e(this),n={};for(var t in r)n[t]=i||"original-order"!==t?r[t](o,s):e.data(this,"isotope-sort-data")[t];
e.data(this,"isotope-sort-data",n)})},_sort:function(){var t=this.options.sortBy,e=this._getSorter,i=this.options.sortAscending?1:-1,o=function(o,n){var s=e(o,t),r=e(n,t);return s===r&&"original-order"!==t&&(s=e(o,"original-order"),r=e(n,"original-order")),(s>r?1:r>s?-1:0)*i};this.$filteredAtoms.sort(o)},_getSorter:function(t,i){return e.data(t,"isotope-sort-data")[i]},_translate:function(t,e){return{translate:[t,e]}},_positionAbs:function(t,e){return{left:t,top:e}},_pushPosition:function(t,e,i){e=Math.round(e+this.offset.left),i=Math.round(i+this.offset.top);var o=this.getPositionStyles(e,i);this.styleQueue.push({$el:t,style:o}),this.options.itemPositionDataEnabled&&t.data("isotope-item-position",{x:e,y:i})},layout:function(t,e){var i=this.options.layoutMode;if(this["_"+i+"Layout"](t),this.options.resizesContainer){var o=this["_"+i+"GetContainerSize"]();this.styleQueue.push({$el:this.element,style:o})}this._processStyleQueue(t,e),this.isLaidOut=!0},_processStyleQueue:function(t,i){var o,n,r,a,l=this.isLaidOut?this.isUsingJQueryAnimation?"animate":"css":"css",h=this.options.animationOptions,c=this.options.onLayout;if(n=function(t,e){e.$el[l](e.style,h)},this._isInserting&&this.isUsingJQueryAnimation)n=function(t,e){o=e.$el.hasClass("no-transition")?"css":l,e.$el[o](e.style,h)};else if(i||c||h.complete){var d=!1,u=[i,c,h.complete],p=this;if(r=!0,a=function(){if(!d){for(var e,i=0,o=u.length;o>i;i++)e=u[i],"function"==typeof e&&e.call(p.element,t,p);d=!0}},this.isUsingJQueryAnimation&&"animate"===l)h.complete=a,r=!1;else if(s.csstransitions){for(var f,g=0,w=this.styleQueue[0],v=w&&w.$el;!v||!v.length;){if(f=this.styleQueue[g++],!f)return;v=f.$el}var x=parseFloat(getComputedStyle(v[0])[y]);x>0&&(n=function(t,e){e.$el[l](e.style,h).one(m,a)},r=!1)}}e.each(this.styleQueue,n),r&&a(),this.styleQueue=[]},resize:function(){this["_"+this.options.layoutMode+"ResizeChanged"]()&&this.reLayout()},reLayout:function(t){this["_"+this.options.layoutMode+"Reset"](),this.layout(this.$filteredAtoms,t)},addItems:function(t,e){var i=this._getAtoms(t);this.$allAtoms=this.$allAtoms.add(i),e&&e(i)},insert:function(t,e){this.element.append(t);var i=this;this.addItems(t,function(t){var o=i._filter(t);i._addHideAppended(o),i._sort(),i.reLayout(),i._revealAppended(o,e)})},appended:function(t,e){var i=this;this.addItems(t,function(t){i._addHideAppended(t),i.layout(t),i._revealAppended(t,e)})},_addHideAppended:function(t){this.$filteredAtoms=this.$filteredAtoms.add(t),t.addClass("no-transition"),this._isInserting=!0,this.styleQueue.push({$el:t,style:this.options.hiddenStyle})},_revealAppended:function(t,e){var i=this;setTimeout(function(){t.removeClass("no-transition"),i.styleQueue.push({$el:t,style:i.options.visibleStyle}),i._isInserting=!1,i._processStyleQueue(t,e)},10)},reloadItems:function(){this.$allAtoms=this._getAtoms(this.element.children())},remove:function(t,e){this.$allAtoms=this.$allAtoms.not(t),this.$filteredAtoms=this.$filteredAtoms.not(t);var i=this,o=function(){t.remove(),e&&e.call(i.element)};t.filter(":not(."+this.options.hiddenClass+")").length?(this.styleQueue.push({$el:t,style:this.options.hiddenStyle}),this._sort(),this.reLayout(o)):o()},shuffle:function(t){this.updateSortData(this.$allAtoms),this.options.sortBy="random",this._sort(),this.reLayout(t)},destroy:function(){var t=this.usingTransforms,e=this.options;this.$allAtoms.removeClass(e.hiddenClass+" "+e.itemClass).each(function(){var e=this.style;e.position="",e.top="",e.left="",e.opacity="",t&&(e[h]="")});var i=this.element[0].style;for(var o in this.originalStyle)i[o]=this.originalStyle[o];this.element.unbind(".isotope").undelegate("."+e.hiddenClass,"click").removeClass(e.containerClass).removeData("isotope"),_.unbind(".isotope")},_getSegments:function(t){var e,i=this.options.layoutMode,o=t?"rowHeight":"columnWidth",n=t?"height":"width",s=t?"rows":"cols",a=this.element[n](),l=this.options[i]&&this.options[i][o]||this.$filteredAtoms["outer"+r(n)](!0)||a;e=Math.floor(a/l),e=Math.max(e,1),this[i][s]=e,this[i][o]=l},_checkIfSegmentsChanged:function(t){var e=this.options.layoutMode,i=t?"rows":"cols",o=this[e][i];return this._getSegments(t),this[e][i]!==o},_masonryReset:function(){this.masonry={},this._getSegments();var t=this.masonry.cols;for(this.masonry.colYs=[];t--;)this.masonry.colYs.push(0)},_masonryLayout:function(t){var i=this,o=i.masonry;t.each(function(){var t=e(this),n=Math.ceil(t.outerWidth(!0)/o.columnWidth);if(n=Math.min(n,o.cols),1===n)i._masonryPlaceBrick(t,o.colYs);else{var s,r,a=o.cols+1-n,l=[];for(r=0;a>r;r++)s=o.colYs.slice(r,r+n),l[r]=Math.max.apply(Math,s);i._masonryPlaceBrick(t,l)}})},_masonryPlaceBrick:function(t,e){for(var i=Math.min.apply(Math,e),o=0,n=0,s=e.length;s>n;n++)if(e[n]===i){o=n;break}var r=this.masonry.columnWidth*o,a=i;this._pushPosition(t,r,a);var l=i+t.outerHeight(!0),h=this.masonry.cols+1-s;for(n=0;h>n;n++)this.masonry.colYs[o+n]=l},_masonryGetContainerSize:function(){var t=Math.max.apply(Math,this.masonry.colYs);return{height:t}},_masonryResizeChanged:function(){return this._checkIfSegmentsChanged()},_fitRowsReset:function(){this.fitRows={x:0,y:0,height:0}},_fitRowsLayout:function(t){var i=this,o=this.element.width(),n=this.fitRows;t.each(function(){var t=e(this),s=t.outerWidth(!0),r=t.outerHeight(!0);0!==n.x&&s+n.x>o&&(n.x=0,n.y=n.height),i._pushPosition(t,n.x,n.y),n.height=Math.max(n.y+r,n.height),n.x+=s})},_fitRowsGetContainerSize:function(){return{height:this.fitRows.height}},_fitRowsResizeChanged:function(){return!0},_cellsByRowReset:function(){this.cellsByRow={index:0},this._getSegments(),this._getSegments(!0)},_cellsByRowLayout:function(t){var i=this,o=this.cellsByRow;t.each(function(){var t=e(this),n=o.index%o.cols,s=Math.floor(o.index/o.cols),r=(n+.5)*o.columnWidth-t.outerWidth(!0)/2,a=(s+.5)*o.rowHeight-t.outerHeight(!0)/2;i._pushPosition(t,r,a),o.index++})},_cellsByRowGetContainerSize:function(){return{height:Math.ceil(this.$filteredAtoms.length/this.cellsByRow.cols)*this.cellsByRow.rowHeight+this.offset.top}},_cellsByRowResizeChanged:function(){return this._checkIfSegmentsChanged()},_straightDownReset:function(){this.straightDown={y:0}},_straightDownLayout:function(t){var i=this;t.each(function(){var t=e(this);i._pushPosition(t,0,i.straightDown.y),i.straightDown.y+=t.outerHeight(!0)})},_straightDownGetContainerSize:function(){return{height:this.straightDown.y}},_straightDownResizeChanged:function(){return!0},_masonryHorizontalReset:function(){this.masonryHorizontal={},this._getSegments(!0);var t=this.masonryHorizontal.rows;for(this.masonryHorizontal.rowXs=[];t--;)this.masonryHorizontal.rowXs.push(0)},_masonryHorizontalLayout:function(t){var i=this,o=i.masonryHorizontal;t.each(function(){var t=e(this),n=Math.ceil(t.outerHeight(!0)/o.rowHeight);if(n=Math.min(n,o.rows),1===n)i._masonryHorizontalPlaceBrick(t,o.rowXs);else{var s,r,a=o.rows+1-n,l=[];for(r=0;a>r;r++)s=o.rowXs.slice(r,r+n),l[r]=Math.max.apply(Math,s);i._masonryHorizontalPlaceBrick(t,l)}})},_masonryHorizontalPlaceBrick:function(t,e){for(var i=Math.min.apply(Math,e),o=0,n=0,s=e.length;s>n;n++)if(e[n]===i){o=n;break}var r=i,a=this.masonryHorizontal.rowHeight*o;this._pushPosition(t,r,a);var l=i+t.outerWidth(!0),h=this.masonryHorizontal.rows+1-s;for(n=0;h>n;n++)this.masonryHorizontal.rowXs[o+n]=l},_masonryHorizontalGetContainerSize:function(){var t=Math.max.apply(Math,this.masonryHorizontal.rowXs);return{width:t}},_masonryHorizontalResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_fitColumnsReset:function(){this.fitColumns={x:0,y:0,width:0}},_fitColumnsLayout:function(t){var i=this,o=this.element.height(),n=this.fitColumns;t.each(function(){var t=e(this),s=t.outerWidth(!0),r=t.outerHeight(!0);0!==n.y&&r+n.y>o&&(n.x=n.width,n.y=0),i._pushPosition(t,n.x,n.y),n.width=Math.max(n.x+s,n.width),n.y+=r})},_fitColumnsGetContainerSize:function(){return{width:this.fitColumns.width}},_fitColumnsResizeChanged:function(){return!0},_cellsByColumnReset:function(){this.cellsByColumn={index:0},this._getSegments(),this._getSegments(!0)},_cellsByColumnLayout:function(t){var i=this,o=this.cellsByColumn;t.each(function(){var t=e(this),n=Math.floor(o.index/o.rows),s=o.index%o.rows,r=(n+.5)*o.columnWidth-t.outerWidth(!0)/2,a=(s+.5)*o.rowHeight-t.outerHeight(!0)/2;i._pushPosition(t,r,a),o.index++})},_cellsByColumnGetContainerSize:function(){return{width:Math.ceil(this.$filteredAtoms.length/this.cellsByColumn.rows)*this.cellsByColumn.columnWidth}},_cellsByColumnResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_straightAcrossReset:function(){this.straightAcross={x:0}},_straightAcrossLayout:function(t){var i=this;t.each(function(){var t=e(this);i._pushPosition(t,i.straightAcross.x,0),i.straightAcross.x+=t.outerWidth(!0)})},_straightAcrossGetContainerSize:function(){return{width:this.straightAcross.x}},_straightAcrossResizeChanged:function(){return!0}},e.fn.imagesLoaded=function(t){function i(){t.call(n,s)}function o(t){var n=t.target;n.src!==a&&-1===e.inArray(n,l)&&(l.push(n),0>=--r&&(setTimeout(i),s.unbind(".imagesLoaded",o)))}var n=this,s=n.find("img").add(n.filter("img")),r=s.length,a="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",l=[];return r||i(),s.bind("load.imagesLoaded error.imagesLoaded",o).each(function(){var t=this.src;this.src=a,this.src=t}),n};var C=function(e){t.console&&t.console.error(e)};e.fn.isotope=function(t,i){if("string"==typeof t){var o=Array.prototype.slice.call(arguments,1);this.each(function(){var i=e.data(this,"isotope");return i?e.isFunction(i[t])&&"_"!==t.charAt(0)?(i[t].apply(i,o),void 0):(C("no such method '"+t+"' for isotope instance"),void 0):(C("cannot call methods on isotope prior to initialization; attempted to call method '"+t+"'"),void 0)})}else this.each(function(){var o=e.data(this,"isotope");o?(o.option(t),o._init(i)):e.data(this,"isotope",new e.Isotope(t,this,i))});return this}}(window,jQuery),jQuery.Isotope.prototype._getMasonryGutterColumns=function(){var t=this.options.masonry&&this.options.masonry.gutterWidth||0;containerWidth=this.element.width(),this.masonry.columnWidth=this.options.masonry&&this.options.masonry.columnWidth||this.$filteredAtoms.outerWidth(!0)||containerWidth,this.masonry.columnWidth+=t,this.masonry.cols=Math.floor((containerWidth+t)/this.masonry.columnWidth),this.masonry.cols=Math.max(this.masonry.cols,1)},jQuery.Isotope.prototype._masonryReset=function(){this.masonry={},this._getMasonryGutterColumns();var t=this.masonry.cols;for(this.masonry.colYs=[];t--;)this.masonry.colYs.push(0)},jQuery.Isotope.prototype._masonryResizeChanged=function(){var t=this.masonry.cols;return this._getMasonryGutterColumns(),this.masonry.cols!==t},function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var r=e||window.event,a=l.call(arguments,1),h=0,d=0,u=0,p=0,f=0,g=0;if(e=t.event.fix(r),e.type="mousewheel","detail"in r&&(u=-1*r.detail),"wheelDelta"in r&&(u=r.wheelDelta),"wheelDeltaY"in r&&(u=r.wheelDeltaY),"wheelDeltaX"in r&&(d=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(d=-1*u,u=0),h=0===u?d:u,"deltaY"in r&&(u=-1*r.deltaY,h=u),"deltaX"in r&&(d=r.deltaX,0===u&&(h=-1*d)),0!==u||0!==d){if(1===r.deltaMode){var m=t.data(this,"mousewheel-line-height");h*=m,u*=m,d*=m}else if(2===r.deltaMode){var y=t.data(this,"mousewheel-page-height");h*=y,u*=y,d*=y}if(p=Math.max(Math.abs(u),Math.abs(d)),(!s||s>p)&&(s=p,o(r,p)&&(s/=40)),o(r,p)&&(h/=40,d/=40,u/=40),h=Math[h>=1?"floor":"ceil"](h/s),d=Math[d>=1?"floor":"ceil"](d/s),u=Math[u>=1?"floor":"ceil"](u/s),c.settings.normalizeOffset&&this.getBoundingClientRect){var w=this.getBoundingClientRect();f=e.clientX-w.left,g=e.clientY-w.top}return e.deltaX=d,e.deltaY=u,e.deltaFactor=s,e.offsetX=f,e.offsetY=g,e.deltaMode=0,a.unshift(e,h,d,u),n&&clearTimeout(n),n=setTimeout(i,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function i(){s=null}function o(t,e){return c.settings.adjustOldDeltas&&"mousewheel"===t.type&&0===e%120}var n,s,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var h=r.length;h;)t.event.fixHooks[r[--h]]=t.event.mouseHooks;var c=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=a.length;i;)this.addEventListener(a[--i],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",c.getLineHeight(this)),t.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=a.length;i;)this.removeEventListener(a[--i],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var i=t(e),o=i["offsetParent"in t.fn?"offsetParent":"parent"]();return o.length||(o=t("body")),parseInt(o.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),jQuery(document).ready(function(t){var e="ontouchstart"in document.documentElement;e&&t("body").addClass("envira-touch")});